<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>話し方トレーニング</title>
<style>
body{font-family:sans-serif;margin:16px;background:#fafafa}
.card{background:#fff;border:1px solid #ddd;border-radius:14px;padding:14px;margin:12px 0}
button{padding:10px 12px;border-radius:12px;border:1px solid #bbb;background:#fff}
button.primary{border-color:#111}
button:disabled{opacity:.4}
input{width:100%;padding:10px;border-radius:12px;border:1px solid #bbb;margin-top:6px}
.timer{font-size:28px;font-weight:bold}
.lock{color:#888;font-size:13px}
</style>
</head>
<body>

<h1>話し方トレーニング</h1>

<div class="card">
<button id="nextPromptBtn">お題を出す</button>
<p id="prompt">押してください</p>
</div>

<div class="card">
STEP1 一言
<input id="oneLine">
<button id="s1done">STEP1完了</button>
</div>

<div class="card">
STEP2 構造
<input id="ketsuron" placeholder="結論" disabled>
<input id="riyuu" placeholder="理由" disabled>
<input id="rei" placeholder="例" disabled>
<button id="s2done" disabled>STEP2完了</button>
</div>

<div class="card">
STEP3 30秒トーク
<div class="timer" id="t30">30</div>
<button id="start30" disabled>開始</button>
</div>

<div class="card">
STEP4 15秒要約
<div class="timer" id="t15">15</div>
<button id="start15" disabled>開始</button>
</div>

<script>
const prompts=[
"フロスが必要な理由",
"検査を大事にする理由",
"今日の出来事を端的に",
"医院理念を説明",
"歯周治療の価値"
];

let pIndex=-1;
document.getElementById("nextPromptBtn").onclick=()=>{
 pIndex=Math.floor(Math.random()*prompts.length);
 document.getElementById("prompt").textContent=prompts[pIndex];
 resetAll();
}

function resetAll(){
 document.getElementById("ketsuron").disabled=true;
 document.getElementById("riyuu").disabled=true;
 document.getElementById("rei").disabled=true;
 document.getElementById("s2done").disabled=true;
 document.getElementById("start30").disabled=true;
 document.getElementById("start15").disabled=true;
}

document.getElementById("s1done").onclick=()=>{
 document.getElementById("ketsuron").disabled=false;
 document.getElementById("riyuu").disabled=false;
 document.getElementById("rei").disabled=false;
 document.getElementById("s2done").disabled=false;
}

document.getElementById("s2done").onclick=()=>{
 document.getElementById("start30").disabled=false;
}

function beep(){
 const ctx=new AudioContext();
 const osc=ctx.createOscillator();
 osc.connect(ctx.destination);
 osc.start();
 osc.stop(ctx.currentTime+0.2);
}

function startTimer(sec,id,nextBtn){
 let t=sec;
 const el=document.getElementById(id);
 el.textContent=t;
 const timer=setInterval(()=>{
  t--;
  el.textContent=t;
  if(t==0){
   clearInterval(timer);
   beep();
   if(nextBtn) document.getElementById(nextBtn).disabled=false;
  }
 },1000);
}

document.getElementById("start30").onclick=()=>startTimer(30,"t30","start15");
document.getElementById("start15").onclick=()=>startTimer(15,"t15");
</script>

</body>
</html>
