<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>話し方トレーニング</title>

<style>
body{font-family:sans-serif;margin:16px;background:#fafafa}
.card{background:#fff;border-radius:14px;padding:16px;margin:12px 0;border:1px solid #ddd}
button{padding:10px 14px;border-radius:12px;border:1px solid #bbb;background:#fff}
.pill{padding:4px 10px;border:1px solid #ddd;border-radius:999px;font-size:12px}
</style>
</head>

<body>

<h1>話し方トレーニング</h1>

<div class="card">
  <span class="pill" id="tag">未選択</span>
  <button id="nextPromptBtn">お題を出す</button>
  <p id="prompt">「お題を出す」を押してください。</p>
</div>

<div class="card">
  <button id="testBtn">テストボタン</button>
  <p id="testOut"></p>
</div>

<script>
// ===== DEBUG PANEL =====
(() => {
  const box = document.createElement("div");
  box.style.cssText="position:fixed;left:10px;right:10px;bottom:10px;background:#fff;border:2px solid red;padding:8px;z-index:9999;font-size:12px;display:none";
  const show=(m)=>{box.style.display="block";box.textContent+=m+"\\n";}
  window.addEventListener("error",e=>show("JS ERROR: "+e.message));
  document.body.appendChild(box);
})();

// ===== アプリ本体 =====
const $ = id => document.getElementById(id);

const prompts=[
 {tag:"歯科",text:"フロスが必要な理由を説明してください"},
 {tag:"経営",text:"検査を大事にする理由を説明してください"},
 {tag:"日常",text:"今日の出来事を端的に説明してください"}
];

let promptIndex=-1;

function pickRandomPromptIndex(){
 let idx=promptIndex;
 while(idx===promptIndex){
  idx=Math.floor(Math.random()*prompts.length);
 }
 return idx;
}

function nextPrompt(){
 promptIndex=pickRandomPromptIndex();
 $("tag").textContent=prompts[promptIndex].tag;
 $("prompt").textContent=prompts[promptIndex].text;
}

$("nextPromptBtn").addEventListener("click",nextPrompt);

$("testBtn").addEventListener("click",()=>{
 $("testOut").textContent="JS動作OK "+new Date().toLocaleTimeString();
});
</script>

</body>
</html>
